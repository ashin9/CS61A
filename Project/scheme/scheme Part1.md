## Introduction

è¿™ä¸ª Scheme é¡¹ç›®éœ€è¦ä½ ç¼–å†™ä¸€ä¸ª Scheme è¯­è¨€çš„è§£é‡Šå™¨ï¼Œè¿™å¯ä¸æ˜¯ä¸€ä¸ªå°å·¥ç¨‹ï¼è¯·å°½æ—©åŠ¨æ‰‹å®Œæˆé¡¹ç›®ï¼Œå› ä¸ºæ•´ä¸ªé¡¹ç›®éƒ¨åˆ†ç¹å¤šï¼Œå¾ˆå¤šåŒå­¦åœ¨åšé¢˜è¿‡ç¨‹ä¸­ä¼šé‡åˆ°å¡å£³çš„æƒ…å†µï¼Œè€Œå°½æ—©å¼€å§‹åˆ™èƒ½ç»™è‡ªå·±ç•™å‡ºå……è£•çš„æ—¶é—´è§£å†³è¿™äº›é—®é¢˜ã€‚è®°å¾—å¯ä»¥åœ¨å®éªŒè¯¾ï¼ˆlabï¼‰å’Œç­”ç–‘æ—¶é—´ï¼ˆoffice hoursï¼‰å¯»æ±‚å¸®åŠ©ã€‚

æˆ‘ä»¬ä¸ºè¿™ä¸ªé¡¹ç›®ç¼–å†™äº† CS 61A å­é›† Scheme çš„è¯­è¨€è§„èŒƒä»¥åŠå†…å»ºè¿‡ç¨‹çš„å‚è€ƒæ–‡æ¡£ã€‚è™½ç„¶æ²¡æœ‰å¿…è¦é€šç¯‡é˜…è¯»è¿™äº›æ–‡æ¡£ï¼Œä½†åœ¨é¡¹ç›®è¯´æ˜ä¸­ï¼Œæˆ‘ä»¬ä¼šä¸ºä½ æŒ‡å‡ºæŸäº›ç‰¹åˆ«æœ‰å¸®åŠ©çš„ç« èŠ‚ï¼Œä¾›ä½ å‚è€ƒã€‚

åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä½ å°†å¼€å‘ä¸€ä¸ªç”¨äºè§£é‡Š Scheme è¯­è¨€å­é›†çš„è§£é‡Šå™¨ã€‚åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼Œä¸å¦¨æ€è€ƒç¼–ç¨‹è¯­è¨€è®¾è®¡ä¸­é‡åˆ°çš„å„ç§é—®é¢˜ã€‚**è®¸å¤šè¯­è¨€çš„â€œå¥‡æ€ªè®¾è®¡â€å®é™…ä¸Šéƒ½æ˜¯è§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨å®ç°å†³ç­–çš„äº§ç‰©ã€‚**æˆ‘ä»¬è¿™æ¬¡å®ç°çš„ Scheme è¯­è¨€å­é›†æè¿°åœ¨ã€ŠComposing Programsã€‹çš„å‡½æ•°å¼ç¼–ç¨‹éƒ¨åˆ†ã€‚ç”±äºæˆ‘ä»¬åªå®ç°äº† Scheme çš„ä¸€ä¸ªå­é›†ï¼Œæ‰€ä»¥ä½ å†™çš„è§£é‡Šå™¨è¡Œä¸ºå¯èƒ½ä¸ä¼šå’Œå…¶ä»–ç°æœ‰çš„ Scheme è§£é‡Šå™¨å®Œå…¨ä¸€è‡´ã€‚

æ­¤å¤–ï¼Œä½ è¿˜éœ€è¦ç”¨ Scheme å®ç°ä¸€äº›å°ç¨‹åºã€‚Scheme æ˜¯ä¸€ç§ç®€å•ä½†åŠŸèƒ½å¼ºå¤§çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ã€‚ä½ åº”è¯¥ä¼šå‘ç°ï¼Œä¹‹å‰åœ¨ Python ä¸­å­¦åˆ°çš„çŸ¥è¯†èƒ½å¤Ÿå¾ˆå¥½åœ°**è¿ç§»**åˆ° Scheme ä»¥åŠå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ã€‚

æœ¬é¡¹ç›®è¿˜æä¾›äº†ä¸€ä¸ªæŒ‘æˆ˜ç‰ˆï¼ˆchallenge versionï¼‰ã€‚è¯¥ç‰ˆæœ¬çš„é¡¹ç›®è¯´æ˜æ›´ä¸ºç®€ç•¥ï¼Œèµ·å§‹ä»£ç ä¹Ÿæ›´åŠ ç²¾ç®€ã€‚å®ƒé€‚åˆæœ‰æ‰å®ç¼–ç¨‹ç»éªŒï¼Œå¹¶ä¸”å¸Œæœ›æŒ‘æˆ˜é«˜éš¾åº¦çš„åŒå­¦ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŒ‘æˆ˜ç‰ˆçš„è¯„åˆ†ä¸æ™®é€šç‰ˆç›¸åŒï¼Œä½ å¯ä»¥é€‰æ‹©åšæŒ‘æˆ˜ç‰ˆæ¥ä»£æ›¿æ™®é€šç‰ˆï¼Œä»¥è·å¾—é¡¹ç›®çš„å…¨éƒ¨åˆ†æ•°ã€‚

ä¹‹åæˆ‘ä»¬è¿˜å°†å‘å¸ƒä¸€ä¸ªå¼€æ”¾å¼çš„å›¾å½¢ç«èµ›ã€‚è¿™ä¸ªç«èµ›æŒ‘æˆ˜ä½ ç”¨æå°‘çš„ Scheme ä»£ç å®ç°é€’å½’å›¾å½¢ã€‚æ¯”å¦‚ï¼Œå›¾ä¸­å±•ç¤ºäº†ä½¿ç”¨ç¾å…ƒç¡¬å¸ç»„æˆ 50 ç¾åˆ†çš„æ‰€æœ‰å¯èƒ½ç»„åˆã€‚æ¯ä¸€æœµèŠ±å‡ºç°åœ¨é•¿åº¦ä¸º 50 çš„æ ‘ææœ«ç«¯ï¼Œå°è§’åº¦çš„åˆ†æ”¯è¡¨ç¤ºå¢åŠ äº†ä¸€æšç¡¬å¸ï¼Œå¤§è§’åº¦çš„åˆ†æ”¯è¡¨ç¤ºä½¿ç”¨äº†æ–°çš„è´§å¸å•ä½ã€‚åœ¨ç«èµ›ä¸­ï¼Œä½ ä¹Ÿå°†æœ‰æœºä¼šå‘æŒ¥æƒ³è±¡åŠ›ï¼Œ**æˆä¸ºä¸€åé€’å½’è‰ºæœ¯å®¶ï¼**

## Download starter files

ä½ å¯ä»¥å°†æ•´ä¸ªé¡¹ç›®ä»£ç æ‰“åŒ…ä¸‹è½½ä¸ºä¸€ä¸ª ZIP å‹ç¼©æ–‡ä»¶ã€‚æœ¬é¡¹ç›®åŒ…å«å¤šä¸ªæ–‡ä»¶ï¼Œä½†ä½ åªéœ€è¦ä¿®æ”¹ä»¥ä¸‹å››ä¸ªæ–‡ä»¶ï¼š`scheme.py`ã€`scheme_reader.py`ã€`questions.scm` å’Œ `tests.scm`ã€‚ä»¥ä¸‹æ˜¯å‹ç¼©åŒ…å†…åŒ…å«çš„æ‰€æœ‰æ–‡ä»¶ï¼š

- **scheme.py**ï¼šå®ç° REPLï¼ˆäº¤äº’å¼è§£é‡Šå™¨ï¼‰ä»¥åŠ Scheme è¡¨è¾¾å¼çš„æ±‚å€¼å™¨ã€‚
- **scheme_reader.py**ï¼šå®ç° Scheme è¾“å…¥çš„è¯»å–å™¨ã€‚å…¶ä¸­åŒ…å« `Pair` ç±»ä»¥åŠ `nil` çš„å®šä¹‰ã€‚
- **scheme_tokens.py**ï¼šå®ç° Scheme è¾“å…¥çš„è¯æ³•åˆ†æå™¨ï¼ˆtokenizerï¼‰ã€‚
- **scheme_builtins.py**ï¼šä½¿ç”¨ Python å®ç° Scheme è¯­è¨€çš„å†…ç½®è¿‡ç¨‹ã€‚
- **buffer.py**ï¼šå®ç° `Buffer` ç±»ï¼Œè¯¥ç±»åœ¨ `scheme_reader.py` ä¸­è¢«ä½¿ç”¨ã€‚
- **ucb.py**ï¼š61A è¯¾ç¨‹é¡¹ç›®ä¸­çš„ä¸€äº›å®ç”¨å‡½æ•°ã€‚
- **questions.scm**ï¼šåŒ…å« **Phase III** çš„ä»£ç æ¡†æ¶ã€‚
- **tests.scm**ï¼šåŒ…å«ä¸€ç³»åˆ—ç”¨ Scheme ç¼–å†™çš„æµ‹è¯•ç”¨ä¾‹ã€‚
- **ok**ï¼šè‡ªåŠ¨è¯„åˆ†è„šæœ¬ã€‚
- **tests**ï¼šå­˜æ”¾ `ok` è¯„åˆ†è„šæœ¬ä½¿ç”¨çš„æµ‹è¯•æ–‡ä»¶ã€‚
- **mytests.rst**ï¼šä¸€ä¸ªç”¨äºæ·»åŠ ä½ è‡ªå·±æµ‹è¯•ç”¨ä¾‹çš„æ–‡ä»¶ã€‚

## Logistics

æœ¬é¡¹ç›®ä¸ºæœŸ **15 å¤©**ï¼Œä½ å¯ä»¥ä¸ **ä¸€åä¼™ä¼´** å…±åŒå®Œæˆã€‚è¯·æ³¨æ„ï¼Œä½  **ä¸èƒ½** ä¸éåˆä½œä¼™ä¼´çš„åŒå­¦åˆ†äº«ä»£ç ï¼Œä¹Ÿ **ä¸èƒ½** å¤åˆ¶å…¶ä»–äººçš„è§£ç­”ã€‚æœ€ç»ˆï¼Œä½ å’Œä½ çš„åˆä½œä¼™ä¼´åªéœ€æäº¤ **ä¸€ä»½** å…±åŒå®Œæˆçš„é¡¹ç›®ã€‚

æˆ‘ä»¬ **å¼ºçƒˆå»ºè®®** ä½ ä»¬ **ä¸€èµ·** å®Œæˆæ‰€æœ‰éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯å°†ä»»åŠ¡æ‹†åˆ†å¼€æ¥ã€‚å¯ä»¥è½®æµç¼–å†™ä»£ç ï¼Œè€Œéç¼–å†™ä»£ç çš„ä¸€æ–¹åº”è¯¥é€šè¿‡æŸ¥çœ‹ä»£ç ã€æä¾›æ”¹è¿›å»ºè®®ä»¥åŠå¸®åŠ©å‘ç°é”™è¯¯æ¥ç§¯æå‚ä¸ã€‚



### è¯„åˆ†æ ‡å‡†

æœ¬é¡¹ç›®æ€»åˆ† **30 åˆ†**ï¼Œå…¶ä¸­ **28 åˆ†** ç”¨äºè¯„ä¼°ä»£ç çš„æ­£ç¡®æ€§ï¼ŒåŒ…æ‹¬ï¼š

- **1 åˆ†**ï¼šé€šè¿‡ `tests.scm` çš„æ‰€æœ‰æµ‹è¯•
- **1 åˆ†**ï¼šåœ¨ç¬¬ä¸€ä¸ªæ£€æŸ¥ç‚¹å‰æäº¤ **é—®é¢˜ 1-6**
- **1 åˆ†**ï¼šåœ¨ç¬¬äºŒä¸ªæ£€æŸ¥ç‚¹å‰æäº¤ **Part I å’Œ Part II**



### æäº¤è¦æ±‚

ä½ éœ€è¦æäº¤ä»¥ä¸‹ **å››ä¸ªæ–‡ä»¶**ï¼š

- `scheme_reader.py`
- `scheme.py`
- `questions.scm`
- `tests.scm`

ä½ **ä¸éœ€è¦**ä¿®æ”¹æˆ–æäº¤ä»»ä½•å…¶ä»–æ–‡ä»¶ã€‚è¦æäº¤é¡¹ç›®ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```
python3 ok --submit
```

ä½ å¯ä»¥åœ¨ **Ok dashboard** ä¸ŠæŸ¥çœ‹ä½ çš„æäº¤è®°å½•ã€‚



### ä»£ç ç¼–å†™è§„åˆ™

å¯¹äºéœ€è¦ä½ å®Œæˆçš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæä¾›ä¸€äº›åˆå§‹ä»£ç ã€‚å¦‚æœä½ ä¸æƒ³ä½¿ç”¨å®ƒï¼Œå¯ä»¥**åˆ é™¤å¹¶ä»å¤´ç¼–å†™**ã€‚åŒæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥**æ·»åŠ æ–°çš„å‡½æ•°**ï¼Œä»¥ä¾¿æ›´å¥½åœ°å®ç°åŠŸèƒ½ã€‚

ä½†æ˜¯ï¼Œè¯· **ä¸è¦ä¿®æ”¹** å…¶ä»–å·²æœ‰å‡½æ•°ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ä½ çš„ä»£ç åœ¨è‡ªåŠ¨è¯„åˆ†å™¨ï¼ˆautograderï¼‰æµ‹è¯•ä¸­å¤±è´¥ã€‚æ­¤å¤–ï¼Œè¯· **ä¸è¦æ›´æ”¹** ä»»ä½•å‡½æ•°çš„**ç­¾å**ï¼ˆåŒ…æ‹¬å‡½æ•°åã€å‚æ•°é¡ºåºæˆ–å‚æ•°æ•°é‡ï¼‰ã€‚



### ä»£ç æµ‹è¯•ä¸è°ƒè¯•

åœ¨æ•´ä¸ªé¡¹ç›®è¿‡ç¨‹ä¸­ï¼Œä½ åº”è¯¥ç»å¸¸æµ‹è¯•ä»£ç çš„æ­£ç¡®æ€§ã€‚è‰¯å¥½çš„å®è·µæ˜¯ **å®šæœŸæµ‹è¯•**ï¼Œè¿™æ ·å¯ä»¥æ›´å®¹æ˜“åœ°å®šä½é—®é¢˜ã€‚ç„¶è€Œï¼Œä¸è¦**è¿‡äºé¢‘ç¹åœ°æµ‹è¯•**ï¼Œä»¥ç¡®ä¿ä½ æœ‰è¶³å¤Ÿçš„æ—¶é—´æ€è€ƒè§£å†³æ–¹æ¡ˆã€‚

æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª **è‡ªåŠ¨è¯„åˆ†å™¨ï¼ˆautograderï¼‰`ok`** æ¥å¸®åŠ©ä½ æµ‹è¯•ä»£ç å¹¶è·Ÿè¸ªè¿›åº¦ã€‚ç¬¬ä¸€æ¬¡è¿è¡Œ `ok` æ—¶ï¼Œä½ éœ€è¦åœ¨æµè§ˆå™¨ä¸­ç™»å½• **Ok è´¦æˆ·**ï¼Œè¯·åŠ¡å¿…å®Œæˆæ­¤æ­¥éª¤ã€‚æ¯æ¬¡è¿è¡Œ `ok` æ—¶ï¼Œå®ƒéƒ½ä¼šè‡ªåŠ¨å¤‡ä»½ä½ çš„ä»£ç å’Œè¿›åº¦åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ã€‚

`ok` çš„ä¸»è¦ä½œç”¨æ˜¯æµ‹è¯•ä½ çš„å®ç°ã€‚æˆ‘ä»¬å»ºè®®ä½ åœ¨å®Œæˆ**æ¯ä¸ªé—®é¢˜**åè¿›è¡Œä¸€æ¬¡æäº¤ã€‚**æœ€ç»ˆåªä¼šå¯¹ä½ æœ€åä¸€æ¬¡æäº¤çš„ç‰ˆæœ¬è¿›è¡Œè¯„åˆ†**ã€‚åŒæ—¶ï¼Œå¦‚æœä½ åœ¨æäº¤æ—¶é‡åˆ°é—®é¢˜ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä½ çš„å¤‡ä»½è®°å½•æ¥å¸®åŠ©ä½ æ¢å¤ä»£ç ã€‚

å¦‚æœä½ å¿˜è®°æäº¤ï¼Œ**ç³»ç»Ÿä¼šè‡ªåŠ¨å°†ä½ çš„æœ€åä¸€æ¬¡å¤‡ä»½è½¬æ¢ä¸ºæäº¤**ï¼Œç¡®ä¿ä½ çš„å·¥ä½œä¸ä¼šä¸¢å¤±ã€‚

å¦‚æœä½ ä¸å¸Œæœ›æˆ‘ä»¬è®°å½•ä½ çš„ä»£ç å¤‡ä»½æˆ–è¿›åº¦ä¿¡æ¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ **æœ¬åœ°è¿è¡Œ `ok`**ï¼Œè¿™æ ·ä¸ä¼šå‘æœåŠ¡å™¨å‘é€ä»»ä½•ä¿¡æ¯ï¼š

```
python3 ok --local
```

å¦‚æœä½ æƒ³ **äº¤äº’å¼** æµ‹è¯•æŸä¸ªå…·ä½“é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```
python3 ok -q [é—®é¢˜ç¼–å·] -i
```

ä¾‹å¦‚ï¼Œæµ‹è¯• **é—®é¢˜ 1**ï¼š

```
python3 ok -q 01 -i
```

è¿™æ ·ä¼šè¿è¡Œè¯¥é—®é¢˜çš„æµ‹è¯•ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªå¤±è´¥çš„æµ‹è¯•ï¼Œå¹¶æä¾›ä¸€ä¸ªäº¤äº’å¼ç¯å¢ƒï¼Œè®©ä½ æ‰‹åŠ¨æµ‹è¯•ç¼–å†™çš„å‡½æ•°ã€‚

å¦‚æœä½ éœ€è¦ **æ‰“å°è°ƒè¯•ä¿¡æ¯**ï¼Œå¯ä»¥ä½¿ç”¨ `print` è¯­å¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
print("DEBUG:", x)
```

è¿™æ ·ä¼šåœ¨ç»ˆç«¯ä¸­è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œä½†ä¸ä¼šå½±å“ `ok` è¯„åˆ†å™¨çš„è¿è¡Œï¼Œä¸ä¼šå› ä¸ºé¢å¤–çš„è¾“å‡ºå¯¼è‡´æµ‹è¯•å¤±è´¥ã€‚



## Interpreter details

### Scheme features

#### è¯»-æ±‚å€¼-è¾“å‡ºï¼ˆRead-Eval-Printï¼‰

è§£é‡Šå™¨çš„åŠŸèƒ½æ˜¯è¯»å– Scheme è¡¨è¾¾å¼ï¼Œè¿›è¡Œæ±‚å€¼ï¼Œç„¶åæ˜¾ç¤ºç»“æœã€‚

ä¾‹å¦‚ï¼š

```
scm> 2
2
scm> (+ 2 3)
5
scm> ((lambda (x) (* x x)) 5)
25
```

ä½ ç›®å‰çš„ `scheme.py` æ–‡ä»¶ä¸­æä¾›çš„åˆå§‹ä»£ç ï¼Œå·²ç»å¯ä»¥æˆåŠŸæ±‚å€¼ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆå› ä¸ºå®ƒåªæ˜¯ä¸€ä¸ªå•ç‹¬çš„æ•°å­—ï¼‰ã€‚ä½†ç¬¬äºŒä¸ªï¼ˆè°ƒç”¨å†…ç½®è¿‡ç¨‹ï¼‰å’Œç¬¬ä¸‰ä¸ªï¼ˆè®¡ç®— 5 çš„å¹³æ–¹ï¼‰è¿˜æ— æ³•æ­£å¸¸å·¥ä½œï¼Œè¿™éœ€è¦ä½ åœ¨é¡¹ç›®ä¸­ç»§ç»­å®Œæˆå®ç°ã€‚

------

#### åŠ è½½ï¼ˆLoadï¼‰

ä½ å¯ä»¥é€šè¿‡ä¼ å…¥æ–‡ä»¶åçš„ç¬¦å·æ¥åŠ è½½æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œè¦åŠ è½½ `tests.scm` æ–‡ä»¶ï¼Œå¯ä»¥è¾“å…¥ä»¥ä¸‹è°ƒç”¨è¡¨è¾¾å¼ï¼š

```
scm> (load 'tests)
```

------

#### ç¬¦å·ï¼ˆSymbolsï¼‰

ä¸åŒçš„ Scheme æ–¹è¨€å¯¹äº **æ ‡è¯†ç¬¦**ï¼ˆä¹Ÿå°±æ˜¯ç¬¦å·å’Œå˜é‡åï¼‰å…è®¸çš„å½¢å¼æœ‰ä¸åŒçš„è§„å®šã€‚

æˆ‘ä»¬è¿™ä¸ªé¡¹ç›®ä¸­é‡‡ç”¨çš„è§„åˆ™æ˜¯ï¼š

- æ ‡è¯†ç¬¦å¯ä»¥ç”± å­—æ¯ï¼ˆa-z å’Œ A-Zï¼‰ã€æ•°å­—ï¼Œä»¥åŠä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦ç»„æˆï¼š

  ```
  !$%&*/:<=>?@^_~-+.
  ```

- ä½†æ˜¯ï¼Œ**ä¸èƒ½** å½¢æˆæœ‰æ•ˆçš„ **æ•´æ•°** æˆ– **æµ®ç‚¹æ•°**ï¼Œä¹Ÿä¸èƒ½æ˜¯å·²å­˜åœ¨çš„ **ç‰¹æ®Šå½¢å¼ç®€å†™**ã€‚

æˆ‘ä»¬çš„ Scheme æ˜¯ **å¤§å°å†™ä¸æ•æ„Ÿ** çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦å­—æ¯ç›¸åŒï¼Œå¤§å°å†™ä¸åŒä¹Ÿç®—æ˜¯åŒä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚è§£é‡Šå™¨å†…éƒ¨ä¼šç»Ÿä¸€ç”¨å°å†™è¡¨ç¤ºå’Œæ‰“å°ï¼š

```
scm> 'Hello
hello
```

------

#### æµ·é¾Ÿå›¾å½¢ï¼ˆTurtle Graphicsï¼‰

é™¤äº†æ ‡å‡†çš„ Scheme è¿‡ç¨‹ï¼Œæˆ‘ä»¬è¿˜æ”¯æŒè°ƒç”¨ Python çš„ `turtle` åŒ…æ¥ç”»å›¾ã€‚è¿™å¯¹äºåç»­çš„å›¾å½¢ç«èµ›ï¼ˆcontestï¼‰ä¼šå¾ˆæœ‰ç”¨ã€‚

ä½ å¯ä»¥åœ¨çº¿æŸ¥çœ‹ Python `turtle` æ¨¡å—çš„å®˜æ–¹æ–‡æ¡£æ¥äº†è§£å…·ä½“ä½¿ç”¨æ–¹æ³•ã€‚

**æ³¨æ„**ï¼š

- Python çš„ `turtle` æ¨¡å—åœ¨ä½ çš„ä¸ªäººç”µè„‘ä¸Šå¯èƒ½é»˜è®¤æ²¡æœ‰å®‰è£…ã€‚
- ä¸è¿‡ï¼Œåœ¨å­¦æ ¡çš„æ•™å­¦ç”¨è®¡ç®—æœºä¸Šï¼Œ`turtle` æ¨¡å—æ˜¯å·²ç»å®‰è£…å¥½çš„ã€‚
- å¦‚æœä½ å¸Œæœ›åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šåš `turtle` ç»˜å›¾ï¼ˆæ¯”å¦‚ä¸ºå‚åŠ å›¾å½¢ç«èµ›åšå‡†å¤‡ï¼‰ï¼Œéœ€è¦è‡ªè¡Œå®‰è£…å¹¶é…ç½®å¥½ `turtle` æ¨¡å—ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨å­¦æ ¡çš„è®¡ç®—æœºæ¥å®Œæˆã€‚

### Implementation overview

#### **Readï¼ˆè¯»å–ï¼‰**

è¿™ä¸€é˜¶æ®µçš„ä½œç”¨æ˜¯å°†ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²ï¼ˆScheme ä»£ç ï¼‰**è§£æ**æˆè§£é‡Šå™¨å†…éƒ¨ä½¿ç”¨çš„ Python è¡¨ç¤ºå½¢å¼ï¼ˆä¾‹å¦‚ `Pair` å¯¹è±¡ï¼‰ã€‚

- **è¯æ³•åˆ†æï¼ˆLexical analysisï¼‰**
   å·²ç»ä¸ºä½ å®ç°å¥½äº†ï¼
   ç›¸å…³ä»£ç åœ¨ `scheme_tokens.py` æ–‡ä»¶ä¸­çš„ `tokenize_lines` å‡½æ•°ã€‚
   å®ƒä¼šè¿”å›ä¸€ä¸ª `Buffer`ï¼ˆå®šä¹‰åœ¨ `buffer.py` ä¸­ï¼‰ï¼Œç”¨æ¥ä¿å­˜åˆ†æå¾—åˆ°çš„ **token**ã€‚
   â¤ ä½ **ä¸éœ€è¦**é˜…è¯»æˆ–ç†è§£è¿™éƒ¨åˆ†ä»£ç ã€‚
- **è¯­æ³•åˆ†æï¼ˆSyntactic analysisï¼‰**
   å‘ç”Ÿåœ¨ `scheme_reader.py` ä¸­çš„ `scheme_read` å’Œ `read_tail` å‡½æ•°é‡Œã€‚
   è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯äº’ç›¸é€’å½’çš„ï¼Œä½œç”¨æ˜¯å°† Scheme çš„ token åºåˆ—è§£æä¸ºæˆ‘ä»¬è§£é‡Šå™¨å†…éƒ¨çš„ Python å¯¹è±¡ã€‚
   â¤ ä½ éœ€è¦**å®Œæˆ**è¿™ä¸¤ä¸ªå‡½æ•°ã€‚

#### **Evalï¼ˆæ±‚å€¼ï¼‰**

è¿™ä¸€é˜¶æ®µçš„ä½œç”¨æ˜¯å¯¹å†…éƒ¨çš„ Python è¡¨ç¤ºçš„ Scheme è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œå¾—åˆ°ç»“æœå€¼ã€‚
 ç›¸å…³ä»£ç ä¸»è¦åœ¨ `scheme.py` æ–‡ä»¶ä¸­ã€‚

- **æ±‚å€¼ï¼ˆEvalï¼‰**
   å‘ç”Ÿåœ¨ `scheme_eval` å‡½æ•°ä¸­ã€‚
  - å¦‚æœè¡¨è¾¾å¼æ˜¯ä¸€ä¸ª **è°ƒç”¨è¡¨è¾¾å¼**ï¼Œä¼šæŒ‰ç…§è°ƒç”¨è¡¨è¾¾å¼çš„æ±‚å€¼è§„åˆ™è¿›è¡Œæ±‚å€¼ï¼ˆè¿™éƒ¨åˆ†éœ€è¦ä½ æ¥å®ç°ï¼‰ã€‚
  - å¦‚æœè¡¨è¾¾å¼æ˜¯ä¸€ä¸ª **ç‰¹æ®Šå½¢å¼ï¼ˆspecial formï¼‰**ï¼Œåˆ™ä¼šè°ƒç”¨å¯¹åº”çš„ `do_?_form` å‡½æ•°ï¼ˆä½ éœ€è¦å®Œæˆè‹¥å¹² `do_?_form` å‡½æ•°ï¼‰ã€‚
- **åº”ç”¨ï¼ˆApplyï¼‰**
   å‘ç”Ÿåœ¨ `scheme_apply` å‡½æ•°ä¸­ã€‚
  - å¦‚æœè¦è°ƒç”¨çš„å‡½æ•°æ˜¯å†…ç½®è¿‡ç¨‹ï¼ˆbuilt-in procedureï¼‰ï¼Œ`scheme_apply` ä¼šè°ƒç”¨ `BuiltInProcedure` å®ä¾‹çš„ `apply` æ–¹æ³•ã€‚
  - å¦‚æœæ˜¯ç”¨æˆ·è‡ªå®šä¹‰è¿‡ç¨‹ï¼ˆuser-defined procedureï¼‰ï¼Œ`scheme_apply` ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è°ƒç”¨å¸§ï¼ˆcall frameï¼‰ï¼Œå¹¶å¯¹å‡½æ•°ä½“ï¼ˆbodyï¼‰è°ƒç”¨ `eval_all`ï¼Œä»è€Œå½¢æˆäº’ç›¸é€’å½’çš„ eval-apply å¾ªç¯ã€‚

#### **Printï¼ˆè¾“å‡ºï¼‰**

è¿™ä¸€é˜¶æ®µçš„ä½œç”¨æ˜¯è¾“å‡ºæ±‚å€¼å¾—åˆ°çš„å€¼ã€‚
 å…·ä½“åšæ³•æ˜¯æ‰“å°ç»“æœå€¼çš„ `__str__` è¡¨ç¤ºã€‚

#### **Loopï¼ˆå¾ªç¯ï¼‰**

å¾ªç¯çš„é€»è¾‘ç”± `scheme.py` æ–‡ä»¶ä¸­çš„ `read_eval_print_loop` å‡½æ•°è´Ÿè´£ã€‚
 â¤ ä½ **ä¸éœ€è¦**ç†è§£å®Œæ•´çš„å®ç°ç»†èŠ‚ã€‚

#### **å¼‚å¸¸å¤„ç†ï¼ˆExceptionsï¼‰**

åœ¨å¼€å‘ Scheme è§£é‡Šå™¨çš„è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ° Python æŠ›å‡ºçš„å„ç§æœªæ•è·å¼‚å¸¸ï¼Œå¯¼è‡´è§£é‡Šå™¨åœæ­¢è¿è¡Œã€‚

- æœ‰äº›å¼‚å¸¸æ˜¯ç”±äºä½ ä»£ç ä¸­çš„**bug**å¼•èµ·çš„ï¼Œè¿™éƒ¨åˆ†éœ€è¦é€šè¿‡**è°ƒè¯•**è§£å†³ã€‚
- ä½†è¿˜æœ‰äº›å¼‚å¸¸æ¥æºäºç”¨æˆ·å†™çš„ Scheme ç¨‹åºå‡ºé”™ï¼Œè¿™éƒ¨åˆ†éœ€è¦ä½ çš„ä»£ç å»**å¤„ç†**ã€‚
   â¤ é€šå¸¸éœ€è¦é€šè¿‡æŠ›å‡º `SchemeError` å¼‚å¸¸æ¥å¤„ç†ç”¨æˆ·ç¨‹åºä¸­çš„é”™è¯¯ã€‚

æ‰€æœ‰çš„ `SchemeError` å¼‚å¸¸éƒ½ä¼šè¢« `read_eval_print_loop` å‡½æ•°æ•è·ï¼Œå¹¶æ˜¾ç¤ºä¸ºé”™è¯¯ä¿¡æ¯ã€‚
 ç†æƒ³çŠ¶æ€ä¸‹ï¼Œä½ çš„è§£é‡Šå™¨åœ¨å¤„ç†ä»»ä½•è¾“å…¥æ—¶ï¼Œéƒ½ä¸åº”è¯¥æœ‰æœªå¤„ç†çš„ Python å¼‚å¸¸ã€‚



### Running the interpreter



## Part 0: Testing Your Interpreter

## Part I: The Reader

åœ¨è¿™ä¸ªéƒ¨åˆ†ä¸­ï¼Œæ‰€æœ‰çš„æ›´æ”¹éƒ½åº”è¯¥å†™åœ¨ `scheme_reader.py` æ–‡ä»¶ä¸­ã€‚

------

åœ¨ **ç¬¬ä¸€éƒ¨åˆ†** å’Œ **ç¬¬äºŒéƒ¨åˆ†** ä¸­ï¼Œä½ å°†åˆ†é˜¶æ®µå¼€å‘ä¸€ä¸ª Scheme è§£é‡Šå™¨ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š

1. è¯»å– Scheme è¡¨è¾¾å¼
2. **ç¬¦å·æ±‚å€¼**
3. è°ƒç”¨å†…å»ºè¿‡ç¨‹
4. å®šä¹‰è¯­å¥
5. Lambda è¡¨è¾¾å¼å’Œè¿‡ç¨‹å®šä¹‰
6. è°ƒç”¨ç”¨æˆ·å®šä¹‰çš„è¿‡ç¨‹
7. ç‰¹æ®Šå½¢å¼ï¼ˆspecial formsï¼‰çš„æ±‚å€¼

------

### ç¬¬ä¸€éƒ¨åˆ†çš„ä»»åŠ¡æ˜¯ï¼š

**è¯»å–å’Œè§£æç”¨æˆ·è¾“å…¥ï¼ˆReading Scheme expressionsï¼‰**

æˆ‘ä»¬çš„é˜…è¯»å™¨ï¼ˆreaderï¼‰ä¼šå°† Scheme ä»£ç è§£æä¸º Python å†…éƒ¨è¡¨ç¤ºã€‚å…·ä½“æ˜ å°„å…³ç³»å¦‚ä¸‹ï¼š

| è¾“å…¥ç¤ºä¾‹       | Scheme è¡¨è¾¾å¼ç±»å‹        | æˆ‘ä»¬çš„å†…éƒ¨è¡¨ç¤º                               |
| -------------- | ------------------------ | -------------------------------------------- |
| `scm> 1`       | æ•°å­—ï¼ˆNumbersï¼‰          | Python å†…å»ºçš„ `int` å’Œ `float` ç±»å‹          |
| `scm> x`       | ç¬¦å·ï¼ˆSymbolsï¼‰          | Python å†…å»ºçš„ `str` ç±»å‹                     |
| `scm> #t`      | å¸ƒå°”å€¼ï¼ˆBooleans #t/#fï¼‰ | Python å†…å»ºçš„ `True` / `False`               |
| `scm> (+ 2 3)` | ç»„åˆï¼ˆCombinationsï¼‰     | `Pair` ç±»çš„å®ä¾‹ï¼ˆå®šä¹‰åœ¨ `scheme_reader.py`ï¼‰ |
| `scm> nil`     | nil                      | `nil` å¯¹è±¡ï¼ˆå®šä¹‰åœ¨ `scheme_reader.py`ï¼‰      |

åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œ**ç»„åˆï¼ˆcombinationsï¼‰** æ—¢å¯ä»¥è¡¨ç¤ºå‡½æ•°è°ƒç”¨è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºç‰¹æ®Šå½¢å¼ï¼ˆspecial formsï¼‰ã€‚

------

å¦‚æœä½ è¿˜æ²¡æœ‰é˜…è¯»è¿‡é¡¹ç›®æ–‡æ¡£ä¸­çš„ **Implementation overviewï¼ˆå®ç°æ¦‚è¿°ï¼‰**ï¼Œè¯·åŠ¡å¿…å…ˆå»çœ‹ä¸€ä¸‹ï¼è¿™æ ·ä½ æ‰èƒ½æ›´å¥½åœ°ç†è§£é˜…è¯»å™¨ï¼ˆreaderï¼‰æ˜¯å¦‚ä½•åˆ†å·¥å®ç°çš„ã€‚

------

### å…³äº Buffer

æˆ‘ä»¬åœ¨å®ç°ä¸­ä½¿ç”¨ `Buffer` å®ä¾‹æ¥ä¿å­˜å·²å‡†å¤‡å¥½è§£æçš„ tokenï¼ˆè¯æ³•å•å…ƒï¼‰ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªåŒ…å« `(+ (2 3))` çš„ `Buffer` å¯¹è±¡ä¼šä¾æ¬¡å­˜æ”¾è¿™äº› tokenï¼š
 `'('`ã€`'+'`ã€`'('`ã€`2`ã€`3`ã€`')'`ã€`')'`ã€‚

å¯ä»¥å‚è€ƒ `buffer.py` æ–‡ä»¶é‡Œçš„ doctestsï¼ˆæ–‡æ¡£æµ‹è¯•ç¤ºä¾‹ï¼‰ï¼Œäº†è§£æ›´å¤šç”¨æ³•ã€‚
 ä½ ä¸éœ€è¦æ·±å…¥ç†è§£ `buffer.py` çš„å…·ä½“å®ç°ï¼Œåªéœ€è¦çŸ¥é“å®ƒçš„æ¥å£å¦‚ä½•ä½¿ç”¨ã€‚

------

### ä½ è¦å®ç°çš„è§£æå‡½æ•°

ä½ éœ€è¦å®Œæˆä¸¤ä¸ªé€’å½’è°ƒç”¨çš„å‡½æ•°ï¼š

- `scheme_read(src)`
- `read_tail(src)`

è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ¥å—ä¸€ä¸ªå‚æ•° `src`ï¼Œå®ƒæ˜¯ `Buffer` ç±»çš„å®ä¾‹ã€‚

------

### ä¸ `Buffer` äº¤äº’çš„æ–¹æ³•

- `src.pop_first()`
   ä¿®æ”¹ `src`ï¼Œåˆ é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ª tokenã€‚
   ä¾‹å¦‚ï¼Œ`src` å½“å‰ä¸º `[4, 3, ')']`ï¼Œè°ƒç”¨ `src.pop_first()` ä¼šè¿”å› `4`ï¼Œ`src` å‰©ä¸‹ `[3, ')']`ã€‚
- `src.current()`
   è¿”å› `src` å½“å‰çš„ç¬¬ä¸€ä¸ª tokenï¼Œä½†**ä¸**åˆ é™¤ã€‚
   ä¾‹å¦‚ï¼Œ`src` å½“å‰ä¸º `[4, 3, ')']`ï¼Œè°ƒç”¨ `src.current()` ä¼šè¿”å› `4`ï¼Œ`src` ä¸å˜ã€‚

âš ï¸ æ³¨æ„ï¼š`Buffer` ä¸æ”¯æŒé€šè¿‡ä¸‹æ ‡è®¿é—®ï¼ˆå³ `buffer[1]` æ˜¯éæ³•çš„ï¼‰ã€‚

å¦‚æœéœ€è¦ä¸€äº›æŒ‡å¯¼å¸®åŠ©ä½ å®Œæˆ **ç¬¬1åˆ°ç¬¬6é¢˜**ï¼Œå¯ä»¥è§‚çœ‹é¡¹ç›®æ–‡æ¡£ä¸­çš„æç¤ºè§†é¢‘ï¼ˆhint videoï¼‰ã€‚

### Problem 1 (2 pt) âœ…

#### å®ç° `scheme_read` å’Œ `read_tail`

é¦–å…ˆï¼Œä½ éœ€è¦å®ç° `scheme_read` å’Œ `read_tail` å‡½æ•°ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè§£æç»„åˆè¡¨è¾¾å¼ï¼ˆcombinationsï¼‰å’ŒåŸå­è¡¨è¾¾å¼ï¼ˆatomic expressionsï¼‰ã€‚

### âœ… ç›®æ ‡è¡Œä¸ºå¦‚ä¸‹ï¼š

#### `scheme_read`

- éœ€è¦ä» `src`ï¼ˆç±»å‹ä¸º `Buffer`ï¼‰ä¸­ç§»é™¤è¶³å¤Ÿå¤šçš„ tokenï¼ˆè¯æ³•å•å…ƒï¼‰ï¼Œä»è€Œç»„æˆä¸€ä¸ªå®Œæ•´çš„è¡¨è¾¾å¼ï¼Œå¹¶è¿”å›è¿™ä¸ªè¡¨è¾¾å¼çš„**å†…éƒ¨è¡¨ç¤º**ï¼ˆå‚è§ä¹‹å‰é‚£å¼ è¡¨ï¼‰ã€‚

#### `read_tail`

- éœ€è¦è¯»å–ä¸€ä¸ª**è¡¨ï¼ˆlistï¼‰æˆ–å¯¹ï¼ˆpairï¼‰**çš„å‰©ä½™éƒ¨åˆ†ï¼Œå‰ææ˜¯å®ƒå‡è®¾ `scheme_read` å·²ç»ç§»é™¤äº†è¯¥è¡¨/å¯¹çš„å¼€æ‹¬å· `(`ã€‚
- `read_tail` ä¼šä¸æ–­è¯»å–è¡¨è¾¾å¼ï¼ˆä¹Ÿå°±æ˜¯è¯´ä¸æ–­ä» `src` ä¸­ç§»é™¤ tokenï¼‰ï¼Œç›´åˆ°é‡åˆ°é…å¯¹çš„å³æ‹¬å· `)` ä¸ºæ­¢ã€‚
- è¿™äº›è¡¨è¾¾å¼å°†è¢«å°è£…æˆ `Pair` çš„é“¾è¡¨å½¢å¼ï¼Œå¹¶ä½œä¸ºè¿”å›å€¼è¿”å›ã€‚

------

### ğŸ”§ ç®€å•æ€»ç»“

- `scheme_read` è¿”å› `src` ä¸­çš„**ä¸‹ä¸€ä¸ªå®Œæ•´çš„å•ä¸€è¡¨è¾¾å¼**ã€‚
- `read_tail` è¿”å› `src` ä¸­ä¸€ä¸ªè¡¨æˆ–å¯¹çš„**å‰©ä½™å…ƒç´ **ã€‚
- ä¸¤ä¸ªå‡½æ•°éƒ½ä¼š**æ”¹å˜ï¼ˆmutateï¼‰** `src`ï¼Œå› ä¸ºå®ƒä»¬ä¼šç§»é™¤å·²ç»å¤„ç†çš„ tokenã€‚

------

### âœ… ä¸¤ä¸ªå‡½æ•°çš„å…·ä½“å®ç°é€»è¾‘å¦‚ä¸‹ï¼š

------

#### `scheme_read` çš„å¤„ç†é€»è¾‘

æ ¹æ® `src` çš„å½“å‰ tokenï¼ˆ`src.current()`ï¼‰æ¥åˆ¤æ–­ï¼š

1. **å¦‚æœå½“å‰ token æ˜¯å­—ç¬¦ä¸² "nil"**
    â†’ è¿”å› `nil` å¯¹è±¡ã€‚
2. **å¦‚æœå½“å‰ token æ˜¯å·¦æ‹¬å· `(`**
    â†’ è¯´æ˜è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªè¡¨æˆ–å¯¹ã€‚
    â†’ è°ƒç”¨ `read_tail` å¤„ç† `src` çš„å‰©ä½™éƒ¨åˆ†ï¼Œå¹¶è¿”å›ç»“æœã€‚
3. **å¦‚æœå½“å‰ token æ˜¯å•å¼•å· `'`**
    â†’ è¿™æ˜¯ `quote` è¡¨è¾¾å¼çš„å¼€å¤´ã€‚
    â†’ ä¸ç”¨ç€æ€¥å¤„ç†ï¼è¿™æ˜¯ç¬¬ 6 é¢˜çš„å†…å®¹ã€‚
4. **å¦‚æœå½“å‰ token ä¸æ˜¯åˆ†éš”ç¬¦ï¼ˆdelimiterï¼‰**
    â†’ è¯´æ˜æ˜¯ä¸€ä¸ªåŸºæœ¬è¡¨è¾¾å¼ï¼ˆæ•°å­—ã€å¸ƒå°”å€¼ç­‰ï¼‰ã€‚
    â†’ è¿”å›è¿™ä¸ªå€¼ï¼ˆé¡¹ç›®æ¨¡æ¿å·²æä¾›å¤„ç†ï¼‰ã€‚
5. **å¦‚æœéƒ½ä¸ç¬¦åˆï¼ŒæŠ›å‡ºé”™è¯¯**
    â†’ é¡¹ç›®æ¨¡æ¿å·²ç»å¸®ä½ å†™å¥½äº†ã€‚

------

#### `read_tail` çš„å¤„ç†é€»è¾‘

æ ¹æ® `src` çš„å½“å‰ tokenï¼ˆ`src.current()`ï¼‰æ¥åˆ¤æ–­ï¼š

1. **å¦‚æœå·²ç»æ²¡æœ‰æ›´å¤š tokenï¼ˆ`src.current()` æ˜¯ Noneï¼‰**
    â†’ è¯´æ˜ç¼ºå°‘å³æ‹¬å· `)`ã€‚
    â†’ æŠ›å‡ºé”™è¯¯ï¼ˆæ¨¡æ¿å·²æä¾›ï¼‰ã€‚
2. **å¦‚æœå½“å‰ token æ˜¯å³æ‹¬å· `)`**
    â†’ è¯´æ˜è¡¨æˆ–å¯¹çš„ç»“å°¾åˆ°äº†ã€‚
    â†’ ç§»é™¤è¿™ä¸ª tokenï¼Œç„¶åè¿”å› `nil`ã€‚
3. **å¦‚æœéƒ½ä¸æ˜¯**
    â†’ å¤„ç†å‰©ä½™ç»„åˆï¼ˆcombinationï¼‰ï¼š
   - ç¬¬ä¸€æ­¥ï¼šç”¨ `scheme_read` è¯»å– `src` ä¸­ä¸‹ä¸€ä¸ªå®Œæ•´çš„è¡¨è¾¾å¼ã€‚
   - ç¬¬äºŒæ­¥ï¼šé€’å½’è°ƒç”¨ `read_tail`ï¼Œè¯»å–è¡¨/å¯¹çš„å…¶ä½™éƒ¨åˆ†ï¼Œç›´åˆ°é‡åˆ° `)`ã€‚
   - è¿”å›ä¸€ä¸ª `Pair` å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ `scheme_read` å¾—åˆ°çš„è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯ `read_tail` å¾—åˆ°çš„å‰©ä½™éƒ¨åˆ†ã€‚

------

### ğŸ”¨ å¼€å‘æç¤º

- æƒ³æ¸…æ¥š**é€’å½’ç»“æ„**ï¼
   `read_tail` æ¯å¤„ç†ä¸€ä¸ªå…ƒç´ ï¼Œå°±é€’å½’å»å¤„ç†å‰©ä½™çš„è¡¨å…ƒç´ ã€‚
   æ¯æ¬¡éƒ½ä¼šå°è£…åœ¨ `Pair` ç»“æ„ä¸­ï¼Œç›´åˆ°é‡åˆ° `nil` ç»ˆæ­¢ã€‚
- å¯ä»¥å»çœ‹çœ‹è¯¾ç¨‹è®²ä¹‰/è§†é¢‘è®²è§£ï¼Œç‰¹åˆ«æ˜¯å…³äºé€’å½’è§£æå™¨çš„å®ç°ã€‚

------

### ç¤ºä¾‹ï¼šè¾“å…¥ â†’ å†…éƒ¨è¡¨ç¤º

```scss
(+ 2 3)
```

1. `scheme_read` è¯»åˆ° `(`ï¼Œäºæ˜¯è¿›å…¥ `read_tail`
2. `read_tail` è¯»åˆ° `+`ï¼Œç”¨ `scheme_read` è§£æä¸ºç¬¦å· `+`
3. `read_tail` é€’å½’ç»§ç»­ï¼Œè¯»åˆ° `2`ï¼Œè§£æä¸ºæ•°å­— `2`
4. `read_tail` ç»§ç»­ï¼Œè¯»åˆ° `3`ï¼Œè§£æä¸ºæ•°å­— `3`
5. `read_tail` ç»§ç»­ï¼Œè¯»åˆ° `)`ï¼Œç»“æŸï¼Œè¿”å› `nil`
6. æ•´ä½“é€’å½’è¿”å›ï¼š

```less
Pair('+', Pair(2, Pair(3, nil)))
```



```shell
âœ  scheme py3 ok -q 01 -u                         
=====================================================================
Assignment: Project 4: Scheme Interpreter
OK, version v1.18.1
=====================================================================

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Unlocking tests

At each "? ", type what you would expect the output to be.
Type exit() to quit

---------------------------------------------------------------------
Problem 1 > Suite 1 > Case 1
(cases remaining: 8)

-- Already unlocked --

---------------------------------------------------------------------
Problem 1 > Suite 1 > Case 2
(cases remaining: 7)

>>> from scheme_reader import *
>>> tokens = tokenize_lines(["(+ 1 ", "(23 4)) ("])
>>> src = Buffer(tokens)
>>> src.current()
? (
-- Not quite. Try again! --

? "("
-- OK! --

>>> src.pop_first()
? "("
-- OK! --

>>> src.current()
? "+"
-- OK! --

>>> src.pop_first()
? "+"
-- OK! --

>>> src.pop_first()
? 1
-- OK! --

â
>>> scheme_read(src)  # Removes the next complete expression in src and returns it as a Pair
? nil
-- Not quite. Try again! --

? Pair(2, Piar(3, nil))
-- Not quite. Try again! --

? unexpected end of file
-- Not quite. Try again! --

? Pair(23, Piar(4, nil))
-- Not quite. Try again! --

? unexpected token: )
-- Not quite. Try again! --

? Pair(23, Pair(4, nil))
-- OK! --

>>> src.current()
? ")"
-- OK! --

---------------------------------------------------------------------
Problem 1 > Suite 1 > Case 3
(cases remaining: 6)

>>> from scheme_reader import *
>>> scheme_read(Buffer(tokenize_lines(['(18 6)']))) # Type SyntaxError if you think this errors
? Pair(18, Pair(6, nil))
-- OK! --

>>> read_line('(18 6)')  # Shorter version of above!
? Pair(18, Pair(6, nil))
-- OK! --

---------------------------------------------------------------------
Problem 1 > Suite 1 > Case 4
(cases remaining: 5)

>>> from scheme_reader import *
>>> read_tail(Buffer(tokenize_lines([')'])))
? SntaxError
-- Not quite. Try again! --

? SyntaxError
-- Not quite. Try again! --

? SyntaxError
-- Not quite. Try again! --

? nil
-- OK! --

>>> read_tail(Buffer(tokenize_lines(['1 2 3)'])))
? nil
-- Not quite. Try again! --

? Pair(1, Pair(2, Pair(3, nil)))
-- OK! --

â
# çœ‹åˆ° (ï¼Œé€’å½’è¿›å…¥ scheme_read è§£æå­è¡¨è¾¾å¼
# â¡ï¸ scheme_read è°ƒç”¨ read_tailï¼Œå¤„ç† 3 4)ï¼Œå¾—åˆ° Pair(3, Pair(4, nil))ï¼Œscheme_read è¿”å› Pair(3, Pair(4, nil))
# 3ï¸âƒ£ å†é€’å½’å›ä¸Šä¸€å±‚ï¼Œå›åˆ° Bufferï¼Œå‰©ä¸‹ [')']ï¼Œread_tail çœ‹åˆ° )ï¼Œè¿”å› nil
>>> read_tail(Buffer(tokenize_lines(['2 (3 4))'])))
? Pair(2, Pari(3, Pair(4, nil), nil)
-- Not quite. Try again! --

? Pair(2, Pair(Pair(3, Pair(4, nil)))
-- Not quite. Try again! --

? Pair(2, Pair(Pair(3, Pair(4, nil), nil))
-- Not quite. Try again! --

? Pair(2, Pair(Pair(3, Pair(4, nil)), nil)
-- Not quite. Try again! --

? Pair(2, Pair(Pair(3, Pair(4, nil)), nil))
-- OK! --

---------------------------------------------------------------------
Problem 1 > Suite 1 > Case 5
(cases remaining: 4)

âï¼Ÿä¸ºä»€ä¹ˆ SynaxError? 
# read_tail æ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†å‰©ä½™çš„ list éƒ¨åˆ†çš„
# ä½†å®ƒçš„å‰ææ¡ä»¶æ˜¯ï¼š å·¦æ‹¬å· ( å·²ç»è¢« scheme_read å¼¹å‡ºæ¥äº†ï¼
>>> from scheme_reader import *
>>> read_tail(Buffer(tokenize_lines(['(1 2 3)']))) # Type SyntaxError if you think this errors
? Pair(1, Pair(2, Pair(3, nil)))
-- Not quite. Try again! --

? Pair(1, Pair(2, Pair(3, nil)))
-- Not quite. Try again! --

? SyntaxError
-- OK! --

>>> read_line('((1 2 3)') # Type SyntaxError if you think this errors
? SyntaxError
-- OK! --

---------------------------------------------------------------------
Problem 1 > Suite 1 > Case 6
(cases remaining: 3)

-- Already unlocked --

---------------------------------------------------------------------
Problem 1 > Suite 1 > Case 7
(cases remaining: 2)

âï¼Ÿä¸ºä»€ä¹ˆè¿™æ ·å¯ä»¥ä½œä¸ºè¾“å…¥ï¼Ÿéš¾é“ä¸è¦å…ˆåˆ†è¯ï¼Ÿ
# æ³¨æ„æ˜¯ read_line() ä¸æ˜¯ read_tail()
>>> from scheme_reader import *
>>> read_line("(+ (- 2 3) 1)")
Choose the number of the correct choice:
0) Pair('+', Pair('-', Pair(2, Pair(3, nil))), Pair(1, nil))
1) Pair('+', Pair(Pair('-', Pair(2, Pair(3, nil))), Pair(1, nil)))
2) Pair('+', Pair('-', Pair(2, Pair(3, Pair(1, nil)))))
? 1
-- OK! --

---------------------------------------------------------------------
Problem 1 > Suite 1 > Case 8
(cases remaining: 1)

-- Already unlocked --

---------------------------------------------------------------------
OK! All cases for Problem 1 unlocked.

Performing authentication
Please enter your school email (.edu): ^C% 
```



